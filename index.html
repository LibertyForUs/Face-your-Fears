<html>
<head>
	<title>OCCULTATUM</title>

  <link rel="stylesheet" href="/styles/fyf-styles.css">
  
  <meta name="viewport" content="width=device-width, height=device-height, minimnum-scale=1.0, target-densitydpi=device-dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  
</head>
<body scroll="no" style="overflow: hidden">
	<div id="bg" class="bg">
		<div class="walk-container">
			<div id="sky" class="shape-sky"/>
			
			
			<div id="sun" class="image-sun"/>
		 	<div id="oc" class="image-occultatum"/>
			<div id="messages" class="debug-messages"/>
		</div>
	</div>	
	 <div id="coords"></div>
  <div id="pointerzone"></div>
</body>

<script src='https://cdn.jsdelivr.net/npm/body-scroll-lock@2.6.1/lib/bodyScrollLock.min.js'></script>
<script>
	
	const disableBodyScroll = bodyScrollLock.disableBodyScroll;
	

	const lockOn = document.getElementById("bg");
	disableBodyScroll(lockOn);

	document.ontouchmove = function(event){
    event.preventDefault();
	}
	document.ontouchend = (e) => {
    e.preventDefault();
	};
	

	window.addEventListener('touchstart', function onFirstTouch(event) {
		var oc = document.getElementById("oc");
		var ocX = parseInt(oc.style.left,10);
		var firstTouchX = event.touches[0].screenX;
		var delta = firstTouchX - ocX - 150;
		if (delta < 0){
			moveLeft(oc);
		}
	  else if(delta > 0){
	  	moveRight(oc)
	  }
	  
	  
	  // document.getElementById("messages").innerHTML =  delta;
	 
	}, false);


	window.addEventListener('touchend', function onFirstTouch(event) {
	  document.getElementById("oc").classList.remove('walk-movement');
		dx = 0;
	 
	}, false);

	
	
	const root = document.documentElement;
 



	// animation code
	var bg = document.getElementById("bg"),
		oc = document.getElementById("oc"),
		d = {},
    dx = 0,
    skip = 10,
    timer;
  

  oc.style.left = 200;

  

	function safeX(x) {  
			var w = window.innerWidth - 100;
	    return x < 0 ? 0 : x > w ? w : x;
	}



	timer = setInterval(function() {
		//alert(parseInt(oc.style.left, 10) + dx + "px");
	  oc.style.left = safeX(parseInt(oc.style.left, 10) + dx) + "px";
	  
	  // clear the timer at 400px to stop the animation
	  if ( oc.style.left > 400 ) {
	    clearInterval( timer );
	  }
	}, 20);
	
	document.addEventListener('keydown', function(event) {
	    const key = event.key; // "ArrowRight", "ArrowLeft", "ArrowUp", or "ArrowDown"
	    
	    switch (key) {
		    case "ArrowLeft":
	        oc.classList.add('walk-movement');
	        oc.classList.add('turn-around');
	        dx = skip * -1;

	        
	        break;
		    case "ArrowRight":
	        oc.classList.add('walk-movement');
	        oc.classList.remove('turn-around');
	        dx = skip;
	        
	        
	        break;

			}
	});

	document.addEventListener('keyup', function(event) {
		
		document.getElementById("oc").classList.remove('walk-movement');
		dx = 0;
	});

	function moveLeft(oc){
		oc.classList.add('walk-movement');
    oc.classList.add('turn-around');
    dx = skip * -1;
	}

	function moveRight(oc){
		oc.classList.add('walk-movement');
    oc.classList.remove('turn-around');
    dx = skip;
	}


	

</script>				
</html>
